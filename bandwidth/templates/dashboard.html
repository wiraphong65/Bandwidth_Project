<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bandwidth Control Dashboard - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏î‡∏ó‡πå</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    </head>
<body style="font-family: 'Prompt', sans-serif;"> <div class="app-layout">
        <nav class="sidebar">
            <div class="sidebar-sticky-content">
                <header class="sidebar-header">
                    <h1 class="sidebar-title">Bandwidth Control</h1>
                    <p class="sidebar-subtitle">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏≤‡∏ü‡∏ü‡∏¥‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</p>
                </header>

                <ul class="navigation-menu" aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å">
                    <li class="menu-item menu-item-active" data-view="simple-queues" title="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Rules ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÅ‡∏ö‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏î‡∏ó‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô">
                        <img src="https://cdn.builder.io/api/v1/image/assets/e2093452b76d4db8bb4b01a220353959/0fb439213d2cb4644eb3f800c818f25049cb8d6b?placeholderIfAbsent=true" alt="‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Simple Queues" class="menu-icon">
                        <span class="menu-text">Simple Queues</span>
                    </li>
                    <li class="menu-item" data-view="queue-tree" title="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Queue ‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
                        <img src="https://cdn.builder.io/api/v1/image/assets/e2093452b76d4db8bb4b01a220353959/281e70674536454a0bcc371fde243369bc7c0b6d?placeholderIfAbsent=true" alt="‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Queue Tree" class="menu-icon">
                        <span class="menu-text">Queue Tree</span>
                    </li>
                    <li class="menu-item" data-view="filter-rules" title="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏ó‡∏£‡∏≤‡∏ü‡∏ü‡∏¥‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
                        <img src="https://cdn.builder.io/api/v1/image/assets/e2093452b76d4db8bb4b01a220353959/90eaf96a82f05cb778f98c767347e6e9c912f84d?placeholderIfAbsent=true" alt="‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Filter Rules" class="menu-icon">
                        <span class="menu-text">Filter Rules</span>
                    </li>
                    <li class="menu-item" data-view="status-page" title="‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö">
                        <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/icon-status-placeholder.png?placeholder=true" alt="‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö" class="menu-icon placeholder-icon"> <a href="{{ url_for('status') }}" class="menu-link-style"><span class="menu-text">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</span></a>
                    </li>
                    <li class="menu-item" data-view="logs-page" title="‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞ Log ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö">
                        <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/icon-logs-placeholder.png?placeholder=true" alt="‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Logs" class="menu-icon placeholder-icon"> <a href="{{ url_for('log_view') }}" class="menu-link-style"><span class="menu-text">Logs</span></a>
                    </li>
                </ul>

                <div class="interface-selector-container">
                    <label for="interface" class="interface-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Network Interface:</label>
                    <select id="interface" class="interface-select-element" name="interface_dropdown" title="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Interface ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Rules">
                        {% if interfaces %}
                            {% for iface in interfaces %}
                                <option value="{{ iface }}" {% if iface == active_if %}selected{% endif %}>{{ iface }}</option>
                            {% endfor %}
                        {% else %}
                            <option value="">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î Interfaces...</option>
                        {% endif %}
                    </select>
                </div>
            </div>

            <footer class="sidebar-footer">
                {% if session.get('logged_in') %}
                    <div class="user-info" title="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö">
                       <span class="user-avatar-placeholder" aria-hidden="true">üë§</span>
                       <span class="user-details">
                           <strong>{{ session.get('username', '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô') }}</strong><br>
                           <small>(‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå: {{ session.get('role', 'N/A') }})</small>
                       </span>
                    </div>
                    <a href="{{ url_for('logout') }}" class="logout-button" title="‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô">
                        <span class="button-icon-placeholder" aria-hidden="true">üö™</span>
                        ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                    </a>
                {% endif %}
                <p class="app-version">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô: 1.0.3</p>
                <p class="copyright-text">&copy; {{ current_year }} BandwidthController Project</p>
            </footer>
        </nav>

        <main class="main-content" aria-labelledby="current-view-title">
            <div class="content-wrapper">
                <header class="page-header">
                    <h2 id="current-view-title">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Simple Queues</h2>
                    <div class="action-bar" role="toolbar" aria-label="‡πÅ‡∏ñ‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Rules">
                        <button id="add-rule-btn" class="button button-primary" title="‡πÄ‡∏û‡∏¥‡πà‡∏° Rule ‡πÉ‡∏´‡∏°‡πà (‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î: A)">
                            <img src="https://cdn.builder.io/api/v1/image/assets/e2093452b76d4db8bb4b01a220353959/85ef0503fd981a23e4d6b79dc4e35babdcf32fbc?placeholderIfAbsent=true" alt="" class="button-icon">
                            ‡πÄ‡∏û‡∏¥‡πà‡∏° Rule
                        </button>
                        <button id="remove-rules-btn" class="button button-danger" title="‡∏•‡∏ö Rules ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î: Delete)" disabled>
                            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/icon-remove-placeholder.png?placeholder=true" alt="" class="button-icon placeholder-icon"> ‡∏•‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                        </button>
                        <button id="enable-rules-btn" class="button button-secondary" title="‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î) Rules ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î: E)" disabled>
                             <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/icon-toggle-placeholder.png?placeholder=true" alt="" class="button-icon placeholder-icon"> ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î
                        </button>
                        <div class="search-container">
                            <label for="search-input" class="visually-hidden">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Rules</label>
                            <input type="search" id="search-input" class="search-input-field" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô IP, ‡∏ä‡∏∑‡πà‡∏≠ Rule)..." aria-label="‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Rules">
                        </div>
                    </div>
                </header>

                <div class="data-table-container">
                    <div class="table-responsive-wrapper">
                        <table class="rules-table" aria-label="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Bandwidth Control Rules">
                            <thead>
                                <tr>
                                    <th class="checkbox-column" scope="col"><label for="select-all" class="visually-hidden">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label><input type="checkbox" id="select-all" title="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Rules ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ"></th>
                                    <th scope="col">‡∏ä‡∏∑‡πà‡∏≠ Rule/‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
                                    <th scope="col">Target IP</th>
                                    <th scope="col">‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á</th>
                                    <th scope="col">Rate</th>
                                    <th scope="col">Max Limit</th>
                                    <th scope="col">‡∏Å‡∏•‡∏∏‡πà‡∏°</th>
                                    <th scope="col">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    <th scope="col">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤</th>
                                    <th scope="col" class="actions-column">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="rules-body">
                                </tbody>
                        </table>
                    </div>
                    <div id="loading-rules-message" class="loading-state" style="display:none;" aria-live="polite">
                        <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Rules, ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>
                    </div>
                    <div id="no-rules-message" class="empty-state" style="display:none;">
                        <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/empty-box-placeholder.png?placeholder=true" alt="‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á" class="empty-state-icon">
                        <p class="empty-state-text">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Rules ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Interface ‡∏ô‡∏µ‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                        <button id="add-first-rule-btn" class="button button-primary">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á Rule ‡πÅ‡∏£‡∏Å!</button>
                    </div>
                </div>

                <section class="monitoring-section" aria-labelledby="monitoring-heading">
                    <h3 id="monitoring-heading" class="section-title">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Bandwidth</h3>
                    <div class="monitoring-layout">
                        <div class="monitoring-panel download-panel" role="region" aria-labelledby="download-title">
                            <h4 id="download-title" class="monitoring-title">Download</h4>
                            <p class="monitoring-value" id="download-value" title="‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì Download ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á Interface ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å">N/A</p>
                            <p class="monitoring-subtitle">Throughput ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                        </div>
                        <div class="monitoring-panel upload-panel" role="region" aria-labelledby="upload-title">
                            <h4 id="upload-title" class="monitoring-title">Upload</h4>
                            <p class="monitoring-value" id="upload-value" title="‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì Upload ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á Interface ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å">N/A</p>
                            <p class="monitoring-subtitle">Throughput ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                        </div>
                    </div>
                </section>

                <section class="group-limits-section" aria-labelledby="group-limits-heading">
                    <h3 id="group-limits-heading" class="section-title">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Group Limits</h3>
                    <div id="group-limits-container">
                        <p class="empty-state-message">‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Group Limits ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)</p>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <div id="rule-modal" class="modal" style="display:none;" role="dialog" aria-labelledby="modal-title-text" aria-modal="true">
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="modal-title-text" class="modal-title-text">‡πÄ‡∏û‡∏¥‡πà‡∏° Rule ‡πÉ‡∏´‡∏°‡πà</h3>
                <button id="close-modal-btn" class="modal-close-button" title="‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ" aria-label="‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á">&times;</button>
            </header>
            <form id="rule-form" class="modal-form" novalidate>
                <input type="hidden" id="rule-id-input" name="rule_id">

                <div class="form-section">
                    <h4 class="form-section-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Rule</h4>
                    <div class="form-row">
                        <div class="form-group form-group-full">
                            <label for="rule-description">‡∏ä‡∏∑‡πà‡∏≠ Rule ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="text" id="rule-description" name="description" required placeholder="‡πÄ‡∏ä‡πà‡∏ô '‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÅ‡∏ö‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏î‡∏ó‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ú‡∏ô‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ'" aria-describedby="description-help">
                            <small id="description-help" class="form-text-help">‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</small>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-ip">Target IP Address <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="text" id="rule-ip" name="ip" required pattern="^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$" title="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å IPv4 Address ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÄ‡∏ä‡πà‡∏ô 192.168.1.10)" placeholder="‡πÄ‡∏ä‡πà‡∏ô 192.168.1.10">
                        </div>
                        <div class="form-group">
                            <label for="rule-direction">‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á (Direction) <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <select id="rule-direction" name="direction" required aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÅ‡∏ö‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏î‡∏ó‡πå">
                                <option value="download" selected>Download (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤)</option>
                                <option value="upload">Upload (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-rate-value">Rate ‡∏à‡∏≥‡∏Å‡∏±‡∏î <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="number" id="rule-rate-value" name="rate_value" min="1" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 5" aria-describedby="rate-help">
                        </div>
                        <div class="form-group">
                            <label for="rule-rate-unit">‡∏´‡∏ô‡πà‡∏ß‡∏¢ Rate <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <select id="rule-rate-unit" name="rate_unit" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á Rate">
                                <option value="kbps">Kbps</option>
                                <option value="mbps" selected>Mbps</option>
                                <option value="gbps">Gbps</option>
                            </select>
                        </div>
                    </div>
                     <small id="rate-help" class="form-text-help">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö IP ‡∏ô‡∏µ‡πâ</small>
                </div>

                <fieldset class="form-fieldset">
                    <legend class="form-section-title">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á (Advanced Options)</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-burst-value">Max Limit / Burst</label>
                            <input type="number" id="rule-burst-value" name="burst_value" min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10 (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" aria-describedby="burst-help">
                        </div>
                        <div class="form-group">
                            <label for="rule-burst-unit">‡∏´‡∏ô‡πà‡∏ß‡∏¢ Burst</label>
                            <select id="rule-burst-unit" name="burst_unit" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á Burst">
                                <option value="">-</option>
                                <option value="kbit">kbit</option>
                                <option value="mbit">Mbit</option>
                                <option value="gbit">Gbit</option>
                                <option value="kbps">KB/s (bytes)</option>
                                <option value="mbps">MB/s (bytes)</option>
                            </select>
                        </div>
                    </div>
                     <small id="burst-help" class="form-text-help">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏ô Rate ‡πÑ‡∏î‡πâ‡∏ä‡∏±‡πà‡∏ß‡∏Ç‡∏ì‡∏∞ (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏ ‡∏à‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö Rate)</small>

                    <div class="form-row">
                         <div class="form-group">
                            <label for="rule-cburst-value">Ceiling Burst (CBurst)</label>
                            <input type="number" id="rule-cburst-value" name="cburst_value" min="0" placeholder="‡∏ñ‡πâ‡∏≤‡∏°‡∏µ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTB)">
                        </div>
                        <div class="form-group">
                            <label for="rule-cburst-unit">‡∏´‡∏ô‡πà‡∏ß‡∏¢ CBurst</label>
                            <select id="rule-cburst-unit" name="cburst_unit" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á Ceiling Burst">
                                <option value="">-</option>
                                <option value="kbit">kbit</option>
                                <option value="mbit">Mbit</option>
                                <option value="gbit">Gbit</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-group-name">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏° (Group Name)</label>
                            <input type="text" id="rule-group-name" name="group_name" placeholder="‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î Rule ‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°">
                        </div>
                        <div class="form-group">
                            <label for="rule-priority">Priority (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTB)</label>
                            <input type="number" id="rule-priority" name="priority" min="0" max="7" placeholder="1-7 (‡∏ô‡πâ‡∏≠‡∏¢=‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)">
                        </div>
                    </div>
                     <div class="form-row">
                        <div class="form-group">
                            <label for="rule-protocol">Protocol</label>
                            <select id="rule-protocol" name="protocol" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Protocol">
                                <option value="">Any</option>
                                <option value="tcp">TCP</option>
                                <option value="udp">UDP</option>
                                <option value="icmp">ICMP</option>
                            </select>
                        </div>
                         <div class="form-group">
                            <label for="rule-source-port">Source Port</label>
                            <input type="text" id="rule-source-port" name="source_port" placeholder="‡πÄ‡∏ä‡πà‡∏ô 80 ‡∏´‡∏£‡∏∑‡∏≠ 1000-2000">
                        </div>
                        <div class="form-group">
                            <label for="rule-destination-port">Destination Port</label>
                            <input type="text" id="rule-destination-port" name="destination_port" placeholder="‡πÄ‡∏ä‡πà‡∏ô 443">
                        </div>
                    </div>
                </fieldset>

                <div class="form-group">
                    <input type="checkbox" id="rule-is-enabled" name="is_enabled" checked>
                    <label for="rule-is-enabled">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Rule ‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</label>
                </div>

                <div class="form-group scheduling-toggle">
                    <input type="checkbox" id="enable-scheduling" name="enable_scheduling" aria-controls="scheduling-options">
                    <label for="enable-scheduling">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Rule ‡∏ô‡∏µ‡πâ</label>
                </div>

                <fieldset id="scheduling-options" class="form-fieldset" style="display:none;">
                    <legend class="form-section-title">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-start-time">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏° (HH:MM) <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="time" id="rule-start-time" name="start_time" aria-describedby="schedule-time-help">
                        </div>
                        <div class="form-group">
                            <label for="rule-end-time">‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (HH:MM) <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="time" id="rule-end-time" name="end_time" aria-describedby="schedule-time-help">
                        </div>
                    </div>
                     <small id="schedule-time-help" class="form-text-help">‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤</small>

                    <div class="form-group">
                        <label>‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ß‡∏±‡∏ô‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤):</label>
                        <div class="weekdays-selector" role="group" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå">
                            <input type="checkbox" id="wd-mon" name="weekdays" value="Mon"><label for="wd-mon">‡∏à.</label>
                            <input type="checkbox" id="wd-tue" name="weekdays" value="Tue"><label for="wd-tue">‡∏≠.</label>
                            <input type="checkbox" id="wd-wed" name="weekdays" value="Wed"><label for="wd-wed">‡∏û.</label>
                            <input type="checkbox" id="wd-thu" name="weekdays" value="Thu"><label for="wd-thu">‡∏û‡∏§.</label>
                            <input type="checkbox" id="wd-fri" name="weekdays" value="Fri"><label for="wd-fri">‡∏®.</label>
                            <input type="checkbox" id="wd-sat" name="weekdays" value="Sat"><label for="wd-sat">‡∏™.</label>
                            <input type="checkbox" id="wd-sun" name="weekdays" value="Sun"><label for="wd-sun">‡∏≠‡∏≤.</label>
                        </div>
                    </div>
                     <div class="form-row">
                        <div class="form-group">
                            <label for="rule-start-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏° (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà)</label>
                            <input type="date" id="rule-start-date" name="start_date">
                        </div>
                        <div class="form-group">
                            <label for="rule-end-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà)</label>
                            <input type="date" id="rule-end-date" name="end_date">
                        </div>
                    </div>
                </fieldset>

                <div class="modal-actions">
                    <button type="submit" id="save-rule-btn" class="button button-primary">
                        <span class="button-icon" aria-hidden="true">üíæ</span> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Rule
                    </button>
                    <button type="button" id="cancel-modal-btn" class="button button-secondary">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/bandwidth-control.js') }}"></script>
</body>
</html>
