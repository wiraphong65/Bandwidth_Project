{% extends "base.html" %}

{% block title %}Dashboard - Bandwidth Control V2{% endblock %} {# ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Title ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ #}

{% block head_extra %}
    {# ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ #}
    {# ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤ bandwidth-control.css ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å include ‡πÉ‡∏ô base.html ‡∏Å‡πá‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà #}
{% endblock %}

{# ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏î‡∏¢ JavaScript ‡∏ú‡πà‡∏≤‡∏ô API ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô Jinja loop ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏•‡πâ‡∏ß #}
{# ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏° ‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô Fallback ‡∏´‡∏£‡∏∑‡∏≠ Placeholder ‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏Å‡πá‡∏¢‡∏±‡∏á OK #}
{% block interface_selector_block %}
    <div class="interface-selector-container">
        <label for="interface" class="interface-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Network Interface:</label>
        <select id="interface" class="interface-select-element" name="interface_dropdown" title="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Interface ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Rules">
            {# JavaScript (bandwidth-control.js) ‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î options ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô API /api/interfaces #}
            <option value="">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î Interfaces...</option> 
            {# ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠ JS ‡πÇ‡∏´‡∏•‡∏î #}
            {# {% if interfaces %} #  ‡∏™‡πà‡∏ß‡∏ô Jinja ‡πÄ‡∏î‡∏¥‡∏° ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ comment ‡∏≠‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡πÑ‡∏î‡πâ ‡∏ñ‡πâ‡∏≤‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤ JS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏°‡∏≠
                {% for iface in interfaces %}
                    <option value="{{ iface }}" {% if iface == active_if %}selected{% endif %}>{{ iface }}</option>
                {% endfor %}
            {% else %}
                <option value="">‡πÑ‡∏°‡πà‡∏û‡∏ö Network Interface</option>
            {% endif %} #}
        </select>
    </div>
{% endblock %}

{% block content %}
<div class="content-wrapper">
    {# ‡πÄ‡∏û‡∏¥‡πà‡∏° Element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á User Messages ‡∏à‡∏≤‡∏Å JavaScript #}
    <div id="user-messages" class="app-message" style="display:none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 2000; padding: 10px 20px; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);" role="alert" aria-live="assertive">
        {#{ message content will be injected by JS }#}
    </div>

    <header class="page-header">
        <h2 id="current-view-title">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Bandwidth Rules</h2> {# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ Title ‡πÉ‡∏´‡πâ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á #}
        <div class="action-bar" role="toolbar" aria-label="‡πÅ‡∏ñ‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Rules">
            <button id="add-rule-btn" class="button button-primary" title="‡πÄ‡∏û‡∏¥‡πà‡∏° Rule ‡πÉ‡∏´‡∏°‡πà (‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î: A)" disabled> {# Disable ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô ‡∏£‡∏≠ JS ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ Interface #}
                <span class="button-icon" aria-hidden="true">‚ûï</span>
                ‡πÄ‡∏û‡∏¥‡πà‡∏° Rule
            </button>
            <button id="remove-rules-btn" class="button button-danger" title="‡∏•‡∏ö Rules ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î: Delete)" disabled>
                <span class="button-icon" aria-hidden="true">üóëÔ∏è</span>
                ‡∏•‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            </button>
            <button id="enable-rules-btn" class="button button-secondary" title="‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î) Rules ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î: E)" disabled>
                <span class="button-icon" aria-hidden="true">üîÑ</span>
                ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î
            </button>
            <div class="search-container">
                <label for="search-input" class="visually-hidden">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Rules</label>
                <input type="search" id="search-input" class="search-input-field" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô IP, ‡∏ä‡∏∑‡πà‡∏≠ Rule)..." aria-label="‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Rules">
            </div>
        </div>
    </header>

    <div class="data-table-container">
        <div class="table-responsive-wrapper">
            <table class="rules-table" aria-label="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Bandwidth Control Rules">
                <thead>
                    <tr>
                        <th class="checkbox-column" scope="col"><label for="select-all" class="visually-hidden">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label><input type="checkbox" id="select-all" title="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Rules ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ"></th>
                        <th scope="col">‡∏ä‡∏∑‡πà‡∏≠ Rule/‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
                        <th scope="col">Target IP</th>
                        <th scope="col">‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á</th>
                        <th scope="col">Rate (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏´‡∏•‡∏±‡∏Å)</th>
                        <th scope="col">Ceil/Max Limit (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTB Upload)</th> {# ‡∏õ‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô #}
                        <th scope="col">Burst (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTB Upload)</th> {# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå Burst #}
                        <th scope="col">‡∏Å‡∏•‡∏∏‡πà‡∏° (Parent)</th>
                        <th scope="col">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                        <th scope="col">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤</th>
                        <th scope="col" class="actions-column">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                    </tr>
                </thead>
                <tbody id="rules-body">
                    {# JavaScript (bandwidth-control.js) ‡∏à‡∏∞ render ‡πÅ‡∏ñ‡∏ß‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà #}
                </tbody>
            </table>
        </div>
        <div id="loading-rules-message" class="loading-state" style="display:none;" aria-live="polite">
            <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Rules, ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>
        </div>
        <div id="no-rules-message" class="empty-state" style="display:block;"> {# ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô JS ‡∏à‡∏∞‡∏ã‡πà‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• #}
            <img src="{{ url_for('static', filename='images/empty-box.png') }}" alt="‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" class="empty-state-icon"> {# ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ô‡∏µ‡πâ‡πÉ‡∏ô static/images #}
            <p class="empty-state-text">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Network Interface ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Rules</p>
            <button id="add-first-rule-btn" class="button button-primary" style="display:none;" disabled>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á Rule ‡πÅ‡∏£‡∏Å!</button> {# JS ‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• #}
        </div>
    </div>

    <section class="monitoring-section" aria-labelledby="monitoring-heading">
        <h3 id="monitoring-heading" class="section-title">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Bandwidth (Interface ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)</h3>
        <div class="monitoring-layout">
            <div class="monitoring-panel download-panel" role="region" aria-labelledby="download-title">
                <h4 id="download-title" class="monitoring-title">Download</h4>
                <p class="monitoring-value" id="download-value" title="‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì Download ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á Interface ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å">N/A</p>
                <p class="monitoring-subtitle">Throughput ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
            </div>
            <div class="monitoring-panel upload-panel" role="region" aria-labelledby="upload-title">
                <h4 id="upload-title" class="monitoring-title">Upload</h4>
                <p class="monitoring-value" id="upload-value" title="‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì Upload ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á Interface ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å">N/A</p>
                <p class="monitoring-subtitle">Throughput ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
            </div>
        </div>
    </section>

    {# ‡∏™‡πà‡∏ß‡∏ô Group Limits ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥ UI ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏ô JS ‡∏ô‡∏µ‡πâ #}
    <section class="group-limits-section" aria-labelledby="group-limits-heading">
        <h3 id="group-limits-heading" class="section-title">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Group Limits (‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)</h3>
        <div id="group-limits-container">
            <p class="empty-state-message">
                (‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Group Limits ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÉ‡∏ô UI ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö)
            </p>
        </div>
    </section>

    {# Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Add/Edit Rule #}
    <div id="rule-modal" class="modal" style="display:none;" role="dialog" aria-labelledby="modal-title-text" aria-modal="true">
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="modal-title-text" class="modal-title-text">‡πÄ‡∏û‡∏¥‡πà‡∏° Rule ‡πÉ‡∏´‡∏°‡πà</h3> {# JS ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô 'Edit Rule' #}
                <button type="button" id="close-modal-btn" class="modal-close-button" title="‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ" aria-label="‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á">&times;</button>
            </header>
            <form id="rule-form" class="modal-form" novalidate>
                <input type="hidden" id="rule-id-input" name="rule_id_to_update"> {# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô name ‡πÉ‡∏´‡πâ‡∏™‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£ update #}

                <div class="form-section">
                    <h4 class="form-section-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Rule</h4>
                    <div class="form-row">
                        <div class="form-group form-group-full">
                            <label for="rule-description">‡∏ä‡∏∑‡πà‡∏≠ Rule ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="text" id="rule-description" name="description" required placeholder="‡πÄ‡∏ä‡πà‡∏ô '‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÅ‡∏ö‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏î‡∏ó‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ú‡∏ô‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ'" aria-describedby="description-help">
                            <small id="description-help" class="form-text-help">‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</small>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-ip">Target IP Address <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="text" id="rule-ip" name="ip" required title="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å IPv4 ‡∏´‡∏£‡∏∑‡∏≠ IPv6 Address ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" placeholder="‡πÄ‡∏ä‡πà‡∏ô 192.168.1.10 ‡∏´‡∏£‡∏∑‡∏≠ 2001:db8::1">
                        </div>
                        <div class="form-group">
                            <label for="rule-direction">‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á (Direction) <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <select id="rule-direction" name="direction" required aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÅ‡∏ö‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏î‡∏ó‡πå">
                                <option value="upload">Upload (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å)</option> {# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô default ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ JS ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° #}
                                <option value="download">Download (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-rate-value">Rate ‡∏à‡∏≥‡∏Å‡∏±‡∏î (‡∏´‡∏•‡∏±‡∏Å) <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="text" id="rule-rate-value" name="rate_value_form" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 5" aria-describedby="rate-help"> {# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô text ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö float #}
                        </div>
                        <div class="form-group">
                            <label for="rule-rate-unit">‡∏´‡∏ô‡πà‡∏ß‡∏¢ Rate <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <select id="rule-rate-unit" name="rate_unit_form" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á Rate">
                                <option value="kbps">Kbps</option>
                                <option value="mbps" selected>Mbps</option>
                                <option value="gbps">Gbps</option>
                                <option value="kbit">Kbit (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö TC)</option>
                                <option value="mbit">Mbit (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö TC)</option>
                            </select>
                        </div>
                    </div>
                     <small id="rate-help" class="form-text-help">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö IP ‡∏ô‡∏µ‡πâ</small>
                </div>

                <fieldset class="form-fieldset">
                    <legend class="form-section-title">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á (HTB Parameters ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Upload)</legend>
                    <p class="form-text-help">‡∏Ñ‡πà‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö Direction "Upload" ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ HTB</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-burst-value">Burst (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTB)</label>
                            <input type="text" id="rule-burst-value" name="burst_value_form" placeholder="‡πÄ‡∏ä‡πà‡∏ô 15" aria-describedby="burst-help">
                        </div>
                        <div class="form-group">
                            <label for="rule-burst-unit">‡∏´‡∏ô‡πà‡∏ß‡∏¢ Burst (TC)</label>
                            <select id="rule-burst-unit" name="burst_unit_form" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á Burst">
                                <option value="">-</option>
                                <option value="k">k (kilobytes)</option>
                                <option value="m">m (megabytes)</option>
                                <option value="g">g (gigabytes)</option>
                                <option value="b">b (bytes)</option>
                                <option value="kbit">kbit</option> {# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢ bits ‡∏î‡πâ‡∏ß‡∏¢ #}
                                <option value="mbit">mbit</option>
                            </select>
                        </div>
                    </div>
                     <small id="burst-help" class="form-text-help">TC burst: ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡πÄ‡∏Å‡∏¥‡∏ô Rate ‡πÑ‡∏î‡πâ‡∏ä‡∏±‡πà‡∏ß‡∏Ç‡∏ì‡∏∞ (‡πÄ‡∏ä‡πà‡∏ô 15k, 2m)</small>

                     <div class="form-row">
                        <div class="form-group">
                            <label for="rule-cburst-value">Ceil / Max Limit (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTB)</label>
                            <input type="text" id="rule-cburst-value" name="cburst_value_form" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10 (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏ = Rate)">
                        </div>
                        <div class="form-group">
                            <label for="rule-cburst-unit">‡∏´‡∏ô‡πà‡∏ß‡∏¢ Ceil (HTB)</label>
                            <select id="rule-cburst-unit" name="cburst_unit_form" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á Ceiling">
                                <option value="">-</option> {# ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Rate #}
                                <option value="kbps">Kbps</option>
                                <option value="mbps">Mbps</option>
                                <option value="gbps">Gbps</option>
                                <option value="kbit">Kbit</option>
                                <option value="mbit">Mbit</option>
                            </select>
                             <small class="form-text-help">‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö Rate ‡∏´‡∏•‡∏±‡∏Å)</small>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-group-name">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏° (Parent Class)</label>
                            <input type="text" id="rule-group-name" name="group_name" placeholder="‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î Rule ‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°">
                            <small class="form-text-help">‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏ ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ Root Qdisc ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á</small>
                        </div>
                        <div class="form-group">
                            <label for="rule-priority">Priority (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTB Class: 0-7)</label>
                            <input type="number" id="rule-priority" name="priority_form_str" min="0" max="7" placeholder="0-7 (‡∏ô‡πâ‡∏≠‡∏¢=‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏π‡∏á)">
                        </div>
                    </div>
                     <div class="form-row">
                        <div class="form-group">
                            <label for="rule-protocol">Protocol</label>
                            <select id="rule-protocol" name="protocol" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Protocol">
                                <option value="">Any</option> {# ‡∏™‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô null/empty string ‡πÑ‡∏õ Backend #}
                                <option value="ip">IP (Any L4)</option>
                                <option value="tcp">TCP</option>
                                <option value="udp">UDP</option>
                                <option value="icmp">ICMP</option>
                            </select>
                        </div>
                         <div class="form-group">
                            <label for="rule-source-port">Source Port</label>
                            <input type="text" id="rule-source-port" name="source_port" placeholder="‡πÄ‡∏ä‡πà‡∏ô 80 ‡∏´‡∏£‡∏∑‡∏≠ 1000-2000">
                        </div>
                        <div class="form-group">
                            <label for="rule-destination-port">Destination Port</label>
                            <input type="text" id="rule-destination-port" name="destination_port" placeholder="‡πÄ‡∏ä‡πà‡∏ô 443">
                        </div>
                    </div>
                </fieldset>

                <div class="form-group">
                    <input type="checkbox" id="rule-is-enabled" name="is_enabled" checked>
                    <label for="rule-is-enabled">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Rule ‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤)</label>
                </div>

                <div class="form-group scheduling-toggle">
                    <input type="checkbox" id="enable-scheduling" name="is_scheduled" aria-controls="scheduling-options"> {# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô name ‡πÄ‡∏õ‡πá‡∏ô is_scheduled ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö DB model #}
                    <label for="enable-scheduling">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Rule ‡∏ô‡∏µ‡πâ</label>
                </div>

                <fieldset id="scheduling-options" class="form-fieldset" style="display:none;">
                    <legend class="form-section-title">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rule-start-time">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏° (HH:MM) <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="time" id="rule-start-time" name="start_time" aria-describedby="schedule-time-help">
                        </div>
                        <div class="form-group">
                            <label for="rule-end-time">‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (HH:MM) <span class="required-asterisk" aria-hidden="true">*</span></label>
                            <input type="time" id="rule-end-time" name="end_time" aria-describedby="schedule-time-help">
                        </div>
                    </div>
                     <small id="schedule-time-help" class="form-text-help">‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤</small>

                    <div class="form-group">
                        <label>‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å=‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤):</label> {# ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ #}
                        <div class="weekdays-selector" role="group" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå">
                            <input type="checkbox" id="wd-mon" name="weekdays" value="Mon"><label for="wd-mon">‡∏à.</label>
                            <input type="checkbox" id="wd-tue" name="weekdays" value="Tue"><label for="wd-tue">‡∏≠.</label>
                            <input type="checkbox" id="wd-wed" name="weekdays" value="Wed"><label for="wd-wed">‡∏û.</label>
                            <input type="checkbox" id="wd-thu" name="weekdays" value="Thu"><label for="wd-thu">‡∏û‡∏§.</label>
                            <input type="checkbox" id="wd-fri" name="weekdays" value="Fri"><label for="wd-fri">‡∏®.</label>
                            <input type="checkbox" id="wd-sat" name="weekdays" value="Sat"><label for="wd-sat">‡∏™.</label>
                            <input type="checkbox" id="wd-sun" name="weekdays" value="Sun"><label for="wd-sun">‡∏≠‡∏≤.</label>
                        </div>
                    </div>
                     <div class="form-row">
                        <div class="form-group">
                            <label for="rule-start-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà)</label>
                            <input type="date" id="rule-start-date" name="start_date">
                        </div>
                        <div class="form-group">
                            <label for="rule-end-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà)</label>
                            <input type="date" id="rule-end-date" name="end_date">
                        </div>
                    </div>
                </fieldset>

                <div class="modal-actions">
                    <button type="submit" id="save-rule-btn" class="button button-primary">
                        <span class="button-icon" aria-hidden="true">üíæ</span> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Rule
                    </button>
                    <button type="button" id="cancel-modal-btn" class="button button-secondary">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    {# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ bandwidth-control.js ‡∏ñ‡∏π‡∏Å include ‡πÉ‡∏ô base.html ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà #}
    {# ‡∏ñ‡πâ‡∏≤ base.html ‡∏°‡∏µ block scripts ‡∏ó‡∏µ‡πà include ‡πÑ‡∏ü‡∏•‡πå JS ‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡πá‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏ã‡πâ‡∏≥ #}
    <script src="{{ url_for('static', filename='js/bandwidth-control.js') }}"></script>
{% endblock %}